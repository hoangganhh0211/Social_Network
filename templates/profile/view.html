{% extends "base.html" %}
{% block title %}Bạn bè{% endblock %}

{% block content %}
<!-- templates/profile/view.html -->
<div class="profile-page">
    <h2>Trang cá nhân của {{ user.username }}</h2>

    <div class="avatar-container">
        <img src="{{ user.avatar_url or url_for('static', filename='default-avatar.png') }}" 
             alt="avatar">
    </div>

    {% if session.get("user_id") == user.user_id %}
    <form class="upload-form" action="{{ url_for('profile.upload_avatar') }}" method="post" enctype="multipart/form-data">
        <input type="file" name="avatar" accept="image/*" required>
        <button type="submit">Tải ảnh đại diện</button>
    </form>
    {% endif %}

    <h3>Bài viết đã đăng</h3>
    <ul class="post-list">
      {% for post in posts %}
        <li class="post-item">
            <p>{{ post.content }}</p>
            {% if post.media_url %}
                <img src="{{ post.media_url }}">
            {% endif %}
            <small>Ngày đăng: {{ post.created_at }}</small>
        </li>
      {% else %}
        <li class="post-item">Chưa có bài viết nào.</li>
      {% endfor %}
    </ul>
</div>
{% endblock %}